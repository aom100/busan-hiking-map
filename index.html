<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë“±ì‚° ë§›ì§‘ ì§€ë„</title>
    <style>
        body { margin: 0; padding: 0; font-family: 'Malgun Gothic', sans-serif; }
        #map { width: 100%; height: 100vh; }
        
        /* ì œëª© ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .title-box {
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            z-index: 10; background: white; padding: 10px 20px;
            border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            text-align: center; font-weight: bold; color: #2E8B57;
            border: 2px solid #2E8B57;
        }

        /* â­ ë‚´ ìœ„ì¹˜ ì°¾ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .my-location-btn {
            position: absolute; bottom: 30px; right: 20px; z-index: 10;
            background-color: #ffffff; color: #333;
            border: none; border-radius: 5px;
            padding: 10px 15px; cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            font-weight: bold; font-size: 14px;
            display: flex; align-items: center; gap: 5px;
        }
        .my-location-btn:hover { background-color: #f0f0f0; }

        /* ë§í’ì„  ìŠ¤íƒ€ì¼ */
        .info-box { padding: 5px; width: 150px; text-align: center; }
        .info-title { font-weight: bold; display: block; margin-bottom: 5px; }
        .info-link { text-decoration: none; color: white; background: #2E8B57; padding: 3px 8px; border-radius: 3px; font-size: 11px; }
    </style>
</head>
<body>
    <div class="title-box">
        â›°ï¸ ë“±ì‚° í•˜ì‚° ë§›ì§‘
    </div>
    
    <div id="map"></div>

    <button class="my-location-btn" onclick="findMyLocation()">
        â— ë‚´ ìœ„ì¹˜ ì°¾ê¸°
    </button>

    <script type="text/javascript" src="http://dapi.kakao.com/v2/maps/sdk.js?appkey=fd3700902efcb45ab6ee8c1baf09338a"></script>
    
    <script>
        var mapContainer = document.getElementById('map'); 
        var mapCenter = new kakao.maps.LatLng(35.2355, 129.0831); // ê¸°ë³¸ ìœ„ì¹˜ (ê¸ˆì •ì‚°ì„±)
        var mapOption = { center: mapCenter, level: 4 };
        var map = new kakao.maps.Map(mapContainer, mapOption); 

        // ë‚´ ìœ„ì¹˜ ë§ˆì»¤ (ì²˜ìŒì—” ì•ˆ ë³´ì„)
        var myMarker = new kakao.maps.Marker({
            map: map,
            image: new kakao.maps.MarkerImage(
                'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png', // ë¹¨ê°„ìƒ‰ ë§ˆì»¤ ì´ë¯¸ì§€
                new kakao.maps.Size(30, 40)
            )
        });

        // 1. ë§›ì§‘ ë°ì´í„° (í•„ìš”í•˜ë©´ ë³µì‚¬í•´ì„œ ëŠ˜ë¦¬ì„¸ìš”)
        var positions = [
            { title: 'ì‚°ì„± ì˜¤ë¦¬ë¶ˆê³ ê¸°', lat: 35.2365, lng: 129.0845, link: '#' },
            { title: 'ê¸ˆì • íŒŒì „ì§‘', lat: 35.2345, lng: 129.0815, link: '#' },
            { title: 'ë“±ì‚°ê° êµ­ìˆ˜', lat: 35.2350, lng: 129.0855, link: '#' }
        ];

        // 2. ë§›ì§‘ ë§ˆì»¤ ì°ê¸°
        for (var i = 0; i < positions.length; i ++) {
            addMarker(positions[i]);
        }

        function addMarker(data) {
            var marker = new kakao.maps.Marker({
                map: map, position: new kakao.maps.LatLng(data.lat, data.lng)
            });
            var content = '<div class="info-box"><span class="info-title">' + data.title + '</span><a href="' + data.link + '" class="info-link" target="_blank">ìƒì„¸ë³´ê¸°</a></div>';
            var infowindow = new kakao.maps.InfoWindow({ content: content, removable: true });
            kakao.maps.event.addListener(marker, 'click', function() { infowindow.open(map, marker); });
        }

        // â­ 3. ë‚´ ìœ„ì¹˜ ì°¾ëŠ” í•¨ìˆ˜ (ë²„íŠ¼ ëˆ„ë¥´ë©´ ì‹¤í–‰ë¨)
        function findMyLocation() {
            if (navigator.geolocation) {
                // ë¸Œë¼ìš°ì €ì—ê²Œ ìœ„ì¹˜ ìš”ì²­
                navigator.geolocation.getCurrentPosition(function(position) {
                    var lat = position.coords.latitude; // ìœ„ë„
                    var lon = position.coords.longitude; // ê²½ë„
                    
                    var locPosition = new kakao.maps.LatLng(lat, lon); // ë‚´ ìœ„ì¹˜ ì¢Œí‘œ ìƒì„±

                    // ì§€ë„ ì´ë™
                    map.setCenter(locPosition);
                    
                    // ë¹¨ê°„ ë§ˆì»¤ë¥¼ ë‚´ ìœ„ì¹˜ë¡œ ì˜®ê¹€
                    myMarker.setPosition(locPosition);
                    
                    alert("ë‚´ ìœ„ì¹˜ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤! ğŸš©");
                    
                }, function(error) {
                    alert("ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¶Œí•œì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
                });
            } else {
                alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            }
        }
    </script>
</body>
</html>